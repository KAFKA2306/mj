# 要件定義

## 概要

Solo Mahjong Practice Machine は、2024年のAI研究を統合した科学的な麻雀トレーニングプラットフォームです。

## 機能要件

### コア機能

- 手牌の生成と表示
- シャンテン数計算
- 役判定（30種以上の役に対応）
- 期待値計算
- 和了確率計算
- 放銃リスク評価

### 役判定（実装済み）

| カテゴリ | 役名 | 翻数 |
| -------- | ---- | ---- |
| 基本役 | リーチ、門前清自摸和、一発 | 1翻 |
| 基本役 | タンヤオ、平和、一盃口 | 1翻 |
| 基本役 | 役牌（風牌・三元牌） | 1翻 |
| 2翻役 | ダブルリーチ、三色同順、一気通貫 | 2翻 |
| 2翻役 | チャンタ、七対子、対々和 | 2翻 |
| 2翻役 | 三暗刻、三色同刻、三槓子 | 2翻 |
| 2翻役 | 混老頭、小三元 | 2翻 |
| 3翻役 | 混一色、純チャン、二盃口 | 3翻 |
| 6翻役 | 清一色 | 6翻 |
| 役満 | 国士無双、四暗刻、大三元 | 13翻 |
| 役満 | 小四喜、字一色、清老頭 | 13翻 |
| 役満 | 緑一色、四槓子 | 13翻 |

### 練習シナリオ

1. **1-Shanten Mastery** - 複数の待ち形と効率
2. **Riichi Decision** - リーチ宣言 vs ダマテン判断
3. **Defensive Play** - 安全牌選択と読み
4. **Yaku Building** - 翻数最適化

## 非機能要件

### パフォーマンス

- LRUキャッシュによる高速計算（10,000エントリ上限）
- ビット演算による O(1) 牌操作
- 10億ユーザー規模を想定した最適化

### 互換性

- デスクトップブラウザ（Chrome, Firefox, Safari, Edge）
- モバイルデバイス（iOS Safari, Android Chrome）
- タッチスクリーン対応

## 技術スタック

- Pure JavaScript（フレームワーク不使用）
- GitHub Pages でホスト
- クライアントサイドのみ（サーバー不要）

## 更新履歴

| 日付 | 内容 |
| ---- | ---- |
| 2026-01-02 | 14種の役判定メソッド追加（checkIttsu等） |
